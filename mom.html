<!doctype html>
<html lang="en">
	<head>
    <!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>
		<script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"></script>
		<script>
			var data = JSON.parse('{"items": [{"id": 1,"name": "蒜粗","unit": "包"}, {"id": 2,"name": "蒜泥","unit": "包"}, {"id": 3,"name": "蔥","unit": "把"}, {"id": 4,"name": "薑絲","unit": "包"}, {"id": 5,"name": "老薑","unit": "斤"}, {"id": 6,"name": "芹菜","unit": "把"}, {"id": 7,"name": "紅辣椒(大)","unit": "斤"}, {"id": 8,"name": "糯米椒","unit": "斤"}, {"id": 9,"name": "青椒","unit": "斤"}, {"id": 10,"name": "茄子","unit": "件"}, {"id": 11,"name": "韭菜花","unit": "把"}, {"id": 12,"name": "空心菜","unit": "斤"},{"id": 14,"name": "大白菜","unit": "件"}, {"id": 16,"name": "袖珍菇","unit": "包"}, {"id": 17,"name": "金針菇","unit": "斤"}, {"id": 18,"name": "杏包菇","unit": "包"}, {"id": 20,"name": "貢丸","unit": "包"}, {"id": 21,"name": "豆干","unit": "斤"}, {"id": 22,"name": "麵腸","unit": "斤"}, {"id": 23,"name": "海帶","unit": "斤"}, {"id": 24,"name": "小芥菜","unit": "斤"}, {"id": 25,"name": "豬血","unit": "包"}, {"id": 26,"name": "地瓜葉","unit": "件"}, {"id": 27,"name": "香菜","unit": "把"}, {"id": 28,"name": "高麗菜","unit": "件"}, {"id": 29,"name": "菠菜","unit": "斤"}, {"id": 30,"name": "豆芽菜","unit": "斤"}, {"id": 31,"name": "長豆","unit": "把"}, {"id": 32,"name": "小黃瓜","unit": "斤"}, {"id": 33,"name": "甜豆","unit": "斤"}, {"id": 34,"name": "絲瓜","unit": "件"}, {"id": 35,"name": "苦瓜","unit": "件"}, {"id": 36,"name": "胡瓜","unit": "件"}, {"id": 37,"name": "番茄","unit": "件"}, {"id": 38,"name": "莧菜","unit": "斤"}, {"id": 39,"name": "蚵白","unit": "斤"}, {"id": 40,"name": "吉古拉","unit": "包"}, {"id": 41,"name": "菜頭","unit": "斤"}, {"id": 43,"name": "板豆腐","unit": "片"}]}');
			
			
			function init(){
				createRowOfTable();
			}
			
			function createInput(obj){
				return "<div class='form-group row'><div class='col-sm-12'><input type='number' class='form-control formInputs' id='"+obj.id+"' placeholder='請輸入數量'><input type='hidden' value='"+obj.name+"' id='name"+obj.id+"'><input type='hidden' value='"+obj.unit+"' id='unit"+obj.id+"'> </div></div>";
			}
			
			function createRowOfTable(){
				$.each(	data.items , function(index,item){
					$("#tbody").append("<tr> <td>"+item.name+"</td> <td>"+createInput(item)+"</td> <td>"+item.unit+"</td> </tr>");
				});
			}
			$(document).ready(function(){
				init();
				
				$("#doCopy").on('click',function(){
					$("#copyInput").val("");
					$(".formInputs").each(function() {
					  var message = $("#copyInput").val();
					  var id = $( this ).attr( "id" );
					  var number = $( this ).val();
					  if(number === undefined || number == 0) return;
					  var name = $( "#name"+id ).val();
					  var unit = $( "#unit"+id ).val();
					  message = message + name + "：" + number + " "+unit +"%0D%0A";
					  $("#copyInput").val(message);
					});
					
					var url = "https://line.me/R/msg/text/?"+$("#copyInput").val();
					$(".formInputs").val("");
					window.open(url,'_blank');
				});
			});
			
		</script>
		
		<style>
			body{
				margin:10px;
			}
		</style>
	</head>
	
	<body class="bg-light">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<form>
						<table class="table"> 
							<thead class="thead-dark">
								<tr>
									<th scope="col">品名</th>
									<th scope="col">數量</th>
									<th scope="col">單位</th>
								</tr>
							</thead>
							<tbody id="tbody">
								
							</tbody>
						</table>
						<input type="hidden" id="copyInput">
					</form>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<form method="get" action="" id="sendLineForm">
					
						
					</form>
					<button type="button" class="btn btn-success btn-lg " id="doCopy">傳送到LINE</button>
				</div>
			</div>
			
		</div>
	</body>
</html>